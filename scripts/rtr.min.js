(function(t){typeof define=="function"&&define.amd?define(t):t()})(function(){"use strict";var b=Object.defineProperty;var N=(t,n,e)=>n in t?b(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var v=(t,n,e)=>(N(t,typeof n!="symbol"?n+"":n,e),e);const t=o=>{for(let s of document.cookie.split(";")){const[c,d]=s.split("=");if(o==c.trim())return decodeURIComponent(d)}return null},n=()=>`${Date.now()}${Math.random()*1e16}`,e=(...o)=>{console.log("%c[reTracker]:","color: black; font-weight: bold",...o)},C="https://artel.reboost.ai/data",O="rid",f="rtr_sid",M="utm_campaign",w="utm_source",U="utm_medium",S="_ga",T="_ym_uid",A="_fbp";var u;(o=>{let s="",c="",d="",l="",m="",I="",E="",_="",p="",h="",g=[],D=Intl.DateTimeFormat().resolvedOptions().timeZone;class K{constructor({events:i,uid:r}){v(this,"uid");s=t(O),e("rid =",s);let k=sessionStorage.getItem(f);e("sid =",k),d=n(),e("vid =",d),l=t(S),m=t(T),I=t(A),e("External analytics ids:",{clientGoogleID:l,clientYandexID:m,clientMetaID:I}),this.uid=r,e("Initial uid =",this.uid),g=i,E=this.getCampaignId(),_=this.getUtmSource(),p=this.getUtmMedium(),h=document.referrer,e("Collected events before init:",g);for(let R of g)this.pushEventHandler(R)}getCampaignId(){return t(M)}getUtmSource(){return t(w)}getUtmMedium(){return t(U)}pushEventHandler(i){let r={rid:s,uid:this.uid,sid:c,vid:d,en:i.name,ts:Date.now(),gaid:l,yaid:m,fbid:I,utmCampaign:E,utmSource:_,utmMedium:p,referrer:h,tz:D,...i.payload||{}};e("ðŸ¡² Send data:",r),navigator.sendBeacon(C,JSON.stringify(r))}setUserId(i){this.uid=String(i),e("Set uid =",this.uid)}pushEvent(i){let r={...i,timeStamp:Date.now()};e("ðŸ¡° Push event:",r),this.pushEventHandler(r)}}o.TrackerMain=K})(u||(u={}));const a=new u.TrackerMain({events:window.rtr.events,uid:window.rtr.uid});window.rtr.setUserId=a.setUserId,window.rtr.pushEvent=a.pushEvent,window.rtr.pushEventHandler=a.pushEventHandler,window.rtr.getCampaignId=a.getCampaignId});
